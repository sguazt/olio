<!--
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>

  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
  <title>Java Olio Web Application</title>


  <style type="text/css">
body,th,td,p,div,span,a,ul,ul li, ol, ol li, ol li b, dl,h1,h2,h3,h4,h5,h6,li
{font-family:geneva,helvetica,arial,"lucida sans",sans-serif; font-size:10pt}
h1 {font-size:18pt}
h2 {font-size:14pt}
h3 {font-size:12pt}
code,kbd,tt,pre {font-family:monaco,courier,"courier new";font-size:10pt;color:#666}
li {padding-bottom: 8px}
p.copy, p.copy a {font-family:geneva,helvetica,arial,"lucida sans",sans-serif; font-size:8pt}
p.copy {text-align: center}
  </style><!-- Copyright 2006 Sun Microsystems, Inc. All rights reserved. You may not modify, use, reproduce, or distribute this software except in compliance with the terms of the License at: http://developer.sun.com/berkeley_license.html
$Id: index.html,v 1.2 2007/02/22 02:58:51 sean_brydon Exp $ -->
</head>


<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);" link="#594fbf" alink="#333366" marginwidth="10" vlink="#1005fb">

<table style="font-family: Times New Roman,Times,serif;" border="0" cellpadding="2" cellspacing="4" width="100%">

  <tbody>

    <tr>

      <td align="right" bgcolor="#587993" valign="top">
      <font color="#ffffff" size="-1"><b><br>

      </b></font></td>

    </tr>

  </tbody>
</table>

<br style="font-family: Times New Roman,Times,serif;">

<h1 style="font-family: Times New Roman,Times,serif;" align="center">Olio/Java<br>

Install and Setup Guide From Source Tree</h1>

<p style="font-family: Times New Roman,Times,serif;"><span style="font-weight: normal;">Note: The
application currently does not use memcached. Please ignore the
memcached related setup instructions</span><br>

</p>

<h2 style="font-family: Times New Roman,Times,serif;">Overview</h2>

<p style="font-family: Times New Roman,Times,serif;">Java Olio is a macro-level benchmark consisting of the
following
components:</p>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p style="margin-bottom: 0in;">The web application</p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">The main database </p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">Distributed storage
servers (MogileFS or localFS)</p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">Storage metadata
database (for MogileFS)</p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">Geocoder emulator </p>

  </li>

  <li>
    <p>Workload driver</p>

  </li>

</ol>

<p style="font-family: Times New Roman,Times,serif;">If your primary interest is in setting up the application
alone, you need items 1-5 above and they can all be setup on a single
system. If on the other hand, you would like to drive load against the
application, you will need at least 2 systems. At higher loads, you may
need multiple systems. At a minimum, we need to separate the SUT
(System Under Test) components and the non-SUT components to get valid
results. The non-SUT components are the Geocoder emulator and the
workload driver. It is best to connect the driver machine to the SUT
machine on a local private network. This ensures that latencies
measured do not include arbitrary delays.</p>

<p style="font-family: Times New Roman,Times,serif;">For a horizontally scaled workload, or to measure the
performance of the individual components, you can deploy the SUT
components on separate physical or virtual machines. &nbsp;Keep in
mind though that the
bulk of cpu is spent in the application server component.&nbsp;<br>

<br>

In the following sections, we'll go over the steps
needed to configure each component :</p>

<a style="font-family: Times New Roman,Times,serif;" href="../../../../../../../../../JavaSetup.html#Downloading_The_Source">Downloading
the source</a>
<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#setupDriver">Setting
up the driver</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#installWebApp">Installing
the Web
Application</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#setupDB">Setting
up the database</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#loadDB">Loading
the database</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#setupFileStore">Setting
up the filestore</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#startMemCached">Starting
memcached
Server</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#setupEmulator">Setting
up the Geocoder
Emulator</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#testWebApp">Testing
the web application</a></p>

<p style="font-family: Times New Roman,Times,serif;"><a href="../../../../../../../../../JavaSetup.html#startRun">Starting
a benchmark run</a></p>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="Prerequisite_Software:"></a>Prerequisite
Software:</h2>

<ul style="font-family: Times New Roman,Times,serif;">

  <li><a href="http://java.sun.com/javase/downloads/index.jsp">Java
SE 6</a></li>

  <li><a href="http://ant.apache.org/">Apache
Ant&nbsp;</a></li>

  <li><a href="http://subversion.tigris.org/">Subversion:&nbsp;</a>
an open source revision control system</li>

  <li><a href="http://faban.sunsource.net/">Faban</a>
a facility for developing and running benchmarks.</li>

  <li>Java EE 5 compliant application server - eg. <a href="https://glassfish.dev.java.net/public/downloadsindex.html">GlassFish</a></li>

  <li>Java Persistence API (JPA) provider - eg. <a href="http://www.eclipse.org/eclipselink/">Eclipselink</a></li>

  <li>Database tier - eg. mySQL</li>

</ul>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="Downloading_The_Source"></a>Downloading
The Source</h2>

<span style="text-decoration: underline; font-weight: bold; font-family: Times New Roman,Times,serif;"></span><br style="font-family: Times New Roman,Times,serif;">
<span style="font-family: Times New Roman,Times,serif;">
The Olio source is available via SVN at </span><a style="font-family: Times New Roman,Times,serif;" href="https://svn.apache.org/repos/asf/incubator/olio/">https://svn.apache.org/repos/asf/incubator/olio/</a><span style="font-family: Times New Roman,Times,serif;">.
Please see the </span><a style="font-family: Times New Roman,Times,serif;" href="http://www.apache.org/dev/version-control.html#anon-svn">instructions</a><span style="font-family: Times New Roman,Times,serif;">
for downloading the source. We will use $OLIO_HOME to designate the
directory where the source is downloaded. The source is organized as
follows :</span><br style="font-family: Times New Roman,Times,serif;">

<br style="font-family: Times New Roman,Times,serif;">

<ul style="font-family: Times New Roman,Times,serif;">

  <li>The <span style="font-style: italic;">webapp</span> directory
contains the web application. The java/trunk sub-directory
contains the workspace for the Java application. The java source
directory resides in java/trunk/ws/apps/webapp/src/java. &nbsp;We
will
refer to
webapp/java/trunk as $WEBAPP in this document.</li>

</ul>

<ul style="font-family: Times New Roman,Times,serif;">

  <li>The <span style="font-style: italic;">workload</span>
directory contains the code for the load
generator/driver (which we typically refer to simply as driver). The
driver is implemented using <a href="http://faban.sunsource.net/">Faban</a>,
an open source benchmarking toolkit. The java/trunk sub-directory has
the faban driver code to drive the php application. In future, we'd
like to integrate the driver source for all implementations of the
application. The workload/workload/java/trunk is referred to as
$WORKLOAD in this document.</li>

</ul>

<p style="font-family: Times New Roman,Times,serif;"></p>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="setupDriver"></a>Setting up the
driver</h2>
<span style="font-family: Times New Roman,Times,serif;">
Even if you don't plan to drive load against the application, this
setup is required as the database and file loaders are part of the
workload driver&nbsp; - feel free to install the driver on the same
system as the web application.
</span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p align="left">See <a href="http://faban.sunsource.net/docs/guide/harness/install.html">http://faban.sunsource.net/docs/guide/harness/install.html</a>
for Faban installation instructions. Note that faban needs to be
installed on all the machines used for the benchmark. &nbsp; Please
also read the <span style="font-style: italic;">Getting
Started Guide</span> to get a high-level understanding of Faban
terminology and how it works.&nbsp; From now on, we
will refer to the faban install directory as $FABAN_HOME.</p>

  </li>

  <li>
    <p align="left">To build the driver, do the following:<br>

    </p>

    <ul>

      <li>cd $WORKLOAD; cp build.properties.template
build.properties<br>

        <br>

      </li>

      <li>Edit build.properties and set faban.home to
$FABAN_HOME, faban.url to http://driver_host:9980
where <span style="font-style: italic;">driver_host</span>
is the name of the machine where the Faban master will run. This is
usually the driver system.<br>

        <br>

      </li>

      <li>Set the environment variable JAVA_HOME to point to your
JDK1.6 installation.<br>

        <br>

      </li>

      <li>Build the driver using the command: ant deploy.jar. If
successful, you should see the file JavaWeb20Driver.jar in the build
sub-directory.</li>

    </ul>

  </li>

  <li>
    <p align="left">To deploy the Faban driver, you can
either copy $WORKLOAD/build/Web20Driver.jar to the
$FABAN_HOME/benchmarks directory, or execute ant deploy.
&nbsp;Executing the deploy target will deploy the build jar file on
the Faban master that you specified as the 'faban.url' in the
build.properties file.<br>

    </p>

  </li>

  <li>
    <p align="left">For the driver to work, you will need
JDK 1.6. Set JAVA_HOME to the path of the JDK in the faban user's
environment.</p>

  </li>

  <li>
    <p align="left">Start the faban master on the master
driver machine :</p>

    <p align="left">$FABAN_HOME/master/bin/startup.sh</p>

  </li>

  <li>
    <p align="left">Test that you can connect to the
master by pointing your browser at http://<i>&lt;driver_machine&gt;</i>:9980
    </p>

  </li>

</ol>

<span style="font-weight: bold; font-family: Times New Roman,Times,serif;"></span>
<h2 style="font-family: Times New Roman,Times,serif;"><a name="Setting_Up_the_Database"></a>Setting
Up the Database</h2>
<span style="font-family: Times New Roman,Times,serif;">
Coolstack is one pre-integrated suite of open source applications
optimized for Solaris. If you're running on any other operating system,
please install the mySQL on those systems.
</span><span style="font-weight: bold; font-family: Times New Roman,Times,serif;"></span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>If you plan to run MySQL on a separate machine, install
MySQL on
that system. We will refer to the MySQL installation directory as
MYSQL_HOME.</li>

  <li>
    <p>Setup the mysql user/group and permissions for its
directories: <br>

# groupadd mysql <br>

# useradd
-d&nbsp;$MYSQL_HOME -g mysql -s /usr/bin/bash&nbsp;mysql<br>

# chown -R
mysql:mysql $MYSQL_HOME<br>

    </p>

  </li>

  <li>
    <p>Create the database :<br>

# su - mysql<br>

$ cd&nbsp;bin<br>

$
./mysql_install_db<br>

    </p>

  </li>

  <li>
    <p>Start the mysql server. Substitute your own password for <i>pwd
    </i><span style="font-style: normal;">(we
typically use</span><i> adminadmin</i><span style="font-style: normal;">)</span><br>

$&nbsp;./mysqld_safe &amp;<br>

$ ./mysqladmin
-u root password <span style="font-style: italic;">&lt;your-</span><i><span style="font-style: italic;">password&gt;</span><br>

$ </i>./mysqladmin
-u root -h &lt;machine-name&gt; password<i>
&lt;your-password&gt;</i></p>

  </li>

  <li>
    <p>Create the web20 user and grant privileges :<br>

$ ./mysql -uroot
-p<i>pwd</i><br>

mysql&gt;
create user 'web20'@'%' identified by 'web20';<br>

mysql&gt;
grant all privileges on *.* to 'web20'@'%'
identified by 'web20' with grant option;<br>

    <br>

    <br>

In some cases the wildcard '%' does not work reliably
as a
substitution for all hosts. You need to grant the privileges to
'web20'@'&lt;hostname&gt;' individually, where hostname are the
names
of the driver and apache systems.<br>

Eg. mysql&gt;
grant all privileges
on
*.* to 'web20'@'localhost' identified by 'web20' with grant option;ysql&gt;
grant all privileges on *.* to 'web20'@'%' identified by 'web20' with
grant option;<br>

    </p>

  </li>

  <li>Create database<br>

mysql&gt;
create database bpwebapp;<br>

mysql&gt;
use bpwebpapp;<br>

    <br>

  </li>

  <li>Although it is possible to create the database schema
automatically by JPA upon
deployment or when the application server starts, it recommended to
create the schema via the bpwebapp_schema.sql file provided.<br>

    <br>

Create database schema by logging in as mysql root user
and running the <i>schema.sql </i>script from
$FABAN_HOME/benchmarks/OlioJavaDriver/bin.<br>

    <br>

mysql&gt; \.<span style="font-style: italic;">
&lt;location&gt;</span>/bpwebapp_schema.sql<br>

mysql&gt; exit<br>

&nbsp;Now, if you login as the user web20, you
should be able to see the
database created by the root user.</li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="loadDB"></a><font size="4">Loading
the database</font></h2>

<p style="font-family: Times New Roman,Times,serif;"><font size="3">It is best to load the database
manually the first
time so that we can test the web application. However, while doing
benchmark runs, the benchmark driver can be configured to
automatically re-load the database before the run.</font></p>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p><font size="3">Login to the machine running
the Faban master driver. Only this machine has the loader at this time.</font></p>

  </li>

  <li><font size="3">Go to the directory containing
the loader script:<br>

    </font><font size="3"># cd </font><span style="font-style: italic;">$FABAN_HOME</span>/benchmarks/Web20Driver/bin</li>

  <li>Ensure the script has execute permissions. Faban takes care
of this for the runs, but since we have not yet started the first run,
we will need to change that ourselves:<br>

# chmod +x
dbloader.sh<br>

  </li>

  <li>Run the loader script:<br>

# ./dbloader.sh <span style="font-style: italic;">&lt;dbserver&gt;
&lt;load_scale&gt;</span><br>

For a fully loaded T2000 (8x1.2Ghz) we are currently running a scale of
around 1000. You can start small with a SCALE of 50 or so for initial
testing<span style="font-weight: bold;">.</span></li>


</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="startMemCached"></a><font size="4">Setting up memcached
server</font></h2>
<span style="font-family: Times New Roman,Times,serif;">
Note - for the current version of Olio Java, you will not have need to
install memcached servers. </span><br style="font-family: Times New Roman,Times,serif;">

<br style="font-family: Times New Roman,Times,serif;">
<span style="font-family: Times New Roman,Times,serif;">
The Olio application uses memcached for caching the home page which
dramatically reduces the load on the database. If you are running Olio
to stress MySQL, you may not want to have the caching tier. In this
case, set the CacheSystem to NoCache in $APP_DIRetc/config.php. This
will eliminate the use of memcached and all requests will directly go
to the database. However, if you do want to use memcached (scaling will
be very difficult without it), you need to setup an instance of
memcached. This can typically run on the same system as the web server.
</span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>Download and install memcached on the system you plan to
use. </li>

  <li>
    <p style="margin-bottom: 0in;"><font size="3">Start
the memcached server thus :<br>

    </font><font size="3">#
nohup /opt/coolstack/bin/memcached -m 256 -u mysql &amp;</font></p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">Edit the web.xml to
reflect where you have installed your memcached servers (see Installing
Web Application for more details).<font size="3"><br>

    </font><font size="3">Note that the
Faban harness will start the memcached servers before each run.</font></p>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="setupEmulator"><font size="4">Setting
up the Geocoder
Emulator</font></a></h2>

<p style="font-family: Times New Roman,Times,serif;">The Geocoder Emulator is a simple J2EE application that you
can deploy on
Glassfish or Tomcat. It is typically run on a driver machine. The
following steps
describe how to install it.</p>

<p style="font-family: Times New Roman,Times,serif;">To build the geocoder:</p>

<ul style="font-family: Times New Roman,Times,serif;">

  <li>Build the geocoder.war file by going to the 'geocoder'
directory and following the instructions in the README file.</li>

</ul>

<p style="font-family: Times New Roman,Times,serif;">
For Glassfish:</p>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Download and install Glassfish V2 from <a href="https://glassfish.dev.java.net/public/downloadsindex.html">https://glassfish.dev.java.net/public/downloadsindex.html.</a>
&nbsp;(alternatively, you can use any J2EE container like Tomcat to
deploy - see below)</li>

  <li>Copy the Web20Emulator.war from the Web20Bench kit to
$GLASSFISH_HOME/domains/domain1/autodeploy (domain1 is the default
domain created with Glassfish)</li>

  <li>Start Glassfish by using $GLASSFISH_HOME/bin/asadmin
start-domain domain1.</li>

</ol>
<span style="font-family: Times New Roman,Times,serif;">
For Tomcat:
</span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p>Download and install Tomcat (either from Cool Stack
CSKtomcat package or directly from <a href="http://tomcat.apache.org/">http://tomcat.apache.org</a>)
on the driver machine. The install directory doesn't matter &ndash;
we will refer to it as $TOMCAT_HOME. </p>

  </li>

  <li>
    <p>Copy the Web20Emulator.war file from the Web20Bench kit in
$TOMCAT_HOME/webapps.</p>

  </li>

  <li>
    <p>Start Tomcat using $TOMCAT_HOME/bin/startup.sh.</p>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="Installing_the_Web_Application_"></a>Installing
the Web Application</h2>

<br style="font-family: Times New Roman,Times,serif;">
<span style="font-family: Times New Roman,Times,serif;">
The web application is a J2EE 5 web application. It requires the
following
components:</span><br style="font-family: Times New Roman,Times,serif;">

<br style="font-family: Times New Roman,Times,serif;">

<ol style="font-family: Times New Roman,Times,serif;">

  <li>J2EE compliant application server (eg. <a href="https://glassfish.dev.java.net/public/downloadsindex.html">GlassFish
v2.1</a>)</li>

  <li>JPA provider &nbsp;( eg. <a href="http://www.eclipse.org/eclipselink/">Eclipselink</a>)</li>

</ol>
<span style="font-family: Times New Roman,Times,serif;">
Install the necessary components outlined above. &nbsp;For
GlassFish
specific instructions, see section on GlassFish Installation and
Configuration.</span><br style="font-family: Times New Roman,Times,serif;">
<span style="font-family: Times New Roman,Times,serif;">
Before building the WAR file to deploy on the application server, you
will first have to edit the web descriptors to point to your database
and geocoder that you set up in the previous steps. &nbsp;</span><br style="font-family: Times New Roman,Times,serif;">

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Edit web.xml in the application war file to configure
the&nbsp;
geocoder URL. &nbsp;This is found in
$OLIO_HOME/src/ws/apps/webapp/web/WEB-INF/web.xml</li>

  <ol>

    <li>Edit the env-entry for Geocoder URL to point to where
your geocoder application is deployed.</li>

  </ol>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="Building_the_codebase"></a>Building
the web application from the codebase</h2>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Set JAVA_HOME, ANT_HOME accordingly in your environment.
&nbsp;Ensure that&nbsp;<code>ant</code> is
available in your path. You can use your own ant installation as long
as it is ant version
1.6.5 or later.</li>

  <li>Edit the build.properties for the relevant build details.
&nbsp;Note that $OLIO_HOME is the directory where
you download the Olio source from Apache:<br>

$ vi
&lt;$OLIO_HOME&gt;/ws/bp-project/build.properties<br>

    <br>

Note that javaee.home needs to be pointed to the
your Java EE 5 application server home directory, or if you're using
GlassFish, the $GLASSFISH_HOME directory. &nbsp;It will look for
the
necessary Java EE jars expecting it to be in the javaee.home/lib
directory.<br>

    <br>

Edit <code>&lt;live.home&gt;/bp-project/build.properties</code>
and ensure
that the following properties match your GlassFish or Java EE 5 server
installation. &nbsp; Note that only javaee.home is necessary for
building as it looks for Java EE 5 specific libraries for compilation.
&nbsp;Properties marked with * denote GlassFish specific settings
that will provide convenience methods for development - i.e. deploying
and undeploying.<br>

    <table border="1" cellpadding="5" cellspacing="0" width="80%">

      <tbody>

        <tr>

          <td style="text-align: center; font-weight: bold;" valign="top" width="20%">Property
Name</td>

          <td style="font-weight: bold;" align="center" valign="top" width="50%">Description</td>

          <td style="font-weight: bold; text-align: center;" valign="top" width="30%">Examples</td>

        </tr>

        <tr>

          <td style="text-align: center;"><code>javaee.home</code></td>

          <td>The installation
directory of the Java EE 5 SDK or GlassFish server</td>

          <td style="text-align: center;"><code>c:/Sun/AppServer</code></td>

        </tr>

        <tr align="left">

          <td style="text-align: center;" valign="top"><code>*javaee.server.name</code></td>

          <td valign="top">Host
name of the server where the&nbsp;GlassFish&nbsp;server
is installed</td>

          <td style="text-align: center;" valign="top"><code>localhost</code></td>

        </tr>

        <tr align="left">

          <td style="text-align: center;" valign="top"><code>*javaee.server.port</code></td>

          <td valign="top">The
port number for the server you chose
while
installing the GlassFish&nbsp;server</td>

          <td style="text-align: center;" valign="top"><code>8080</code></td>

        </tr>

        <tr align="left">

          <td style="text-align: center;" valign="top"><code>*javaee.server.username</code></td>

          <td valign="top">The
administrator username specified for the server (if using GlassFish
while installing
the&nbsp;GlassFish&nbsp;server)</td>

          <td style="text-align: center;" valign="top"><code>admin</code></td>

        </tr>

        <tr align="left">

          <td style="text-align: center;" valign="top"><code>*javaee.server.passwordfile</code></td>

          <td valign="top">The
path to a file containing the admin
password for the&nbsp;GlassFish&nbsp;server. The password file
needs to be in the
following format:
          <p><code>AS_ADMIN_PASSWORD=&lt;javaeesdk-admin-password&gt;</code>
          </p>

          <p>Where you will
replace &lt;javaeesdk-admin-password&gt; with
the admin password for the GlassFish Java EE 5 server.</p>

          </td>

          <td style="text-align: center;" valign="top"><code>/path/to/passwordfile</code></td>

        </tr>

        <tr valign="top">

          <td style="text-align: center;" valign="top"><code>*javaee.adminserver.port</code></td>

          <td valign="top">The
port number for admin server you chose
while installing the&nbsp;GlassFish&nbsp;server</td>

          <td style="text-align: center;" valign="top"><code>4848</code></td>

        </tr>

        <tr>

          <td style="text-align: center;"><code>*proxy.host</code></td>

          <td>The host name of your HTTP proxy server, if the
server
running&nbsp;GlassFish&nbsp;server is behind a firewall. Leave
blank otherwise</td>

          <td style="text-align: center;"><code>myproxy.mydomain</code></td>

        </tr>

        <tr>

          <td style="text-align: center;"><code>*proxy.port</code></td>

          <td>The port number of your HTTP proxy server, if the
server
running&nbsp;GlassFish&nbsp;server is behind a firewall. Leave
blank otherwise</td>

          <td style="text-align: center;"><code>8080</code></td>

        </tr>

      </tbody>
    </table>

  </li>

  <li>Change directories to the level of the webapp directory:<br>

$ cd
&lt;$OLIO_HOME&gt;/ws/apps/webapp<br>

  </li>

  <li>Compile and jar the WAR file by executing the default
"ant"command. &nbsp;You should see messages that the build is
compiling:<br>

    <br>

$ ant<br>

Buildfile: build.xml<br>

    <br>

default-ear:<br>

    <br>

init:<br>

    <br>

build-mvc:<br>

    <br>

default-ear:<br>

    <br>

init:<br>

    <br>

-pre-compile:<br>

    <br>

bpp-actual-compilation:<br>

&nbsp;&nbsp;&nbsp;&nbsp; [echo] Compiling mvc<br>

    <br>

-post-compile:<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [jar] Building jar:
&lt;$OLIO_HOME&gt;/ws/commons/mvc/dist/mvc.jar<br>

    <br>

compile:<br>

    <br>

package:<br>

&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
&lt;$OLIO_HOME&gt;/ws/commons/mvc/build/war<br>

    <br>

bp-copy-classes:<br>

&nbsp;&nbsp;&nbsp; [mkdir] Created dir:
&lt;$OLIO_HOME&gt;/ws/commons/mvc/build/war/WEB-INF/classes<br>

&nbsp;&nbsp;&nbsp;&nbsp; [copy] Copying 4 files
to&nbsp;&lt;$OLIO_HOME&gt;/ws/commons/mvc/build/war/WEB-INF/classes<br>

&nbsp;&nbsp;&nbsp;&nbsp; [copy] Copying 1 file
to&nbsp;&lt;$OLIO_HOME&gt;/ws/commons/mvc/build/war</li>

  <li>The resulting <span style="font-weight: bold;">webapp.wa</span>r
file should be located in the&nbsp;&lt;$OLIO_HOME&gt;/ws/apps/webapp/dist directory.</li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;">Deploying the Web Application</h2>
<span style="font-family: Times New Roman,Times,serif;">
The Java Olio web application can be deployed on any Java EE compliant
application server with a JPA provider.
</span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p>Deploy
the webapp.war from the web20Bench Java kit from dist directory to your
Java EE 5 application server. &nbsp;<br>

If you are using GlassFish, &nbsp;please see the GlassFish specific
instructions on installing, configuration and deployment</p>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="installWebApp"></a><font size="4">Configuring the Application Server</font></h2>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Download the JDBC driver for mysql from <a href="http://dev.mysql.com/downloads/connector/j/5.1.html">http://dev.mysql.com/downloads/connector/j/5.1.html.</a>&nbsp;
Extract the mysql-connector-java-5.1.X-bin.jar and put this your
application server classpath (or external library directory)</li>

  <li>Download a Java Persistence API (JPA) provider, eg.
EclipseLink. &nbsp;You will have to download the eclipselink.jar
from <a href="http://www.eclipse.org/eclipselink">http://www.eclipse.org/eclipselink</a>,
and put this in your application server classpath.</li>

  <li>Create JDBC connection pool and resource for connecting to
mySQL
database. &nbsp;Below are examples for the properties used for the
connection pool:<br>

&nbsp;&nbsp;&nbsp; * Name: Use this name when you configure
the JDBC resource.&nbsp; eg. BPwebappPool<br>

&nbsp;&nbsp;&nbsp; * Resource Type: Specify the appropriate
value, eg. javax.sql.DataSource<br>

&nbsp;&nbsp;&nbsp; * Database Vendor: mysql<br>

&nbsp;&nbsp;&nbsp; * DataSource Classname: Specify one of
the following:<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o com.mysql.jdbc.jdbc2.optional.MysqlDataSource<br>

&nbsp;&nbsp;&nbsp; * Properties:<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o serverName -
Specify the host name or IP address of the database server.<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o port - Specify the port number of the database server eg. 3306<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o user - Set as appropriate.<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o&nbsp; password - Set as appropriate.<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o databaseName - Set as appropriate, eg. bpwebapp<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o URL - If you
are using global transactions, you can set this property instead of
serverName, port, and databaseName, eg.
jdbc:mysql://&lt;dbhost&gt;:3306/bpwebapp<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
o Keep the rest of properties created.<br>

    <br>

6.&nbsp; Create the JDBC resource with the JNDI name
jdbc/BPWebappDB pointing to new resource created above.<br>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><font size="4"><a name="Glassfish_Installation_and_Configuration"></a>&nbsp;Glassfish
Installation and Configuration</font></h2>
<span style="font-family: Times New Roman,Times,serif;">
Please ignore the following section if you are using another
application server other than GlassFish.
</span>
<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p>Install Glassfish application server V2 UR2 from <a href="https://glassfish.dev.java.net/public/downloadsindex.html"><span style="text-decoration: underline;">https://glassfish.dev.java.net/public/downloadsindex.html.</span></a>
    <br>

The directory where Glassfish has been installed will now be referred
to as $GLASSFISH_HOME. </p>

  </li>

  <li>
    <p>Download the JDBC driver for mysql from <a href="http://dev.mysql.com/downloads/connector/j/5.1.html">http://dev.mysql.com/downloads/connector/j/5.1.html.</a>
&nbsp; Extract the mysql-connector-java-5.1.X-bin.jar and drop this
is
$GLASSFISH_HOME/domains/domain1/lib/ext directory (or whatever you have
named your domain).</p>

  </li>

  <li>The
benchmark utilizes JPA (Java Persistence API) and has been benchmarked
with the EclipseLink implementation. &nbsp;If you are using
Glassfish v2
UR3, EclipseLink is the JPA implementation bundled with Glassfish.
&nbsp;If
you are using an earlier build, you will have to download the
eclipselink.jar from <a href="http://www.eclipse.org/eclipselink">http://www.eclipse.org/eclipselink</a>,
and &nbsp;put this in $GLASSFISH_HOME/lib directory. &nbsp;This
is a concurrency <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=238696">bug
filed</a> on EclipseLink so you will need to get a build after
July 2008. </li>

  <br>

  <li>Instructions on how to use the
Glassfish admin
interface is <a href="https://glassfish.dev.java.net/javaee5/admin-gui/admin-gui.html#Usage">https://glassfish.dev.java.net/javaee5/admin-gui/admin-gui.html#Usage</a>.
&nbsp;To edit the classpath prefix, please consult&nbsp; <a href="https://glassfish.dev.java.net/javaee5/docs/AG/ablwj.html#ablwm">https://glassfish.dev.java.net/javaee5/docs/AG/ablwj.html#ablwm</a>.
&nbsp;<br>

Note:
&nbsp;To use the admin interface, you will have to start Glassfish.
&nbsp;To do
so,&nbsp; use $GLASSFISH_HOME/bin/asadmin start-domain domain1 (or
whatever your
domain name is if you are using the default domain1).<br>

&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;To
stop Glassfish, use $GLASSFISH_HOME/bin/asadmin stop-domain domain1.</li>

  <li>
    <p>Create JDBC connection pool and resource. &nbsp;Please
consult <a href="https://glassfish.dev.java.net/javaee5/docs/AG/ablih.html">https://glassfish.dev.java.net/javaee5/docs/AG/ablih.html</a>
for details. &nbsp;MM MySQL Type 4 Driver (Non-XA)<br>

The JAR file for the MySQL driver is
mysql-connector-java-version-bin-g.jar, for example,
mysql-connector-java-5.1.6-bin-g.jar. Configure the connection pool
using the following settings:<br>

    </p>

    <ul>

      <li>Name: Use this name when you configure the JDBC
resource. &nbsp;eg. BPwebappPool</li>

      <li>Resource Type: Specify the appropriate value, eg.
javax.sql.DataSource</li>

      <li>Database Vendor: mysql</li>

      <li>DataSource Classname: Specify one of the following:</li>

      <ul>

        <li>com.mysql.jdbc.jdbc2.optional.MysqlDataSource</li>

      </ul>

      <li>Properties:</li>

      <ul>

        <li>serverName - Specify the host name or IP address of
the database server.</li>

      </ul>

      <ul>

        <li>port - Specify the port number of the database server
eg. 3306</li>

      </ul>

      <ul>

        <li>user - Set as appropriate.</li>

        <li>&nbsp;password - Set as appropriate.</li>

        <li>databaseName - Set as appropriate, eg. bpwebapp</li>

        <li>URL
- If you are using global transactions, you can set this property
instead of serverName, port, and databaseName, eg.
jdbc:mysql://&lt;dbhost&gt;:3306/bpwebapp</li>

        <li>Keep the rest of properties created.</li>

      </ul>

      <li>Create the JDBC resource with the JNDI name
jdbc/BPWebappDB pointing to new resource created above.</li>

    </ul>

  </li>

  <h2>Deployment of web application on GlassFish</h2>

  <ol>

    <li>You can do so by
either dropping the war file in the
$GLASSFISH_HOME/domains/domain1/autodeploy directory. &nbsp;You can
also
deploy via different methods by referring to <a href="https://glassfish.dev.java.net/downloads/quickstart/index.html#Packaging_and_Deploying_Applications">https://glassfish.dev.java.net/downloads/quickstart/index.html#Packaging_and_Deploying_Applications</a>.
&nbsp;</li>

    <li>Change directory to &lt;live.home&gt; and enter
the following commands<br>

      <code style="font-weight: bold;">ant setup</code><br>

      <code style="font-weight: bold;">ant run</code><br>

Or if you want more finer grained control to tinker with code, you can
run<br>

      <code style="font-weight: bold;">ant</code><br>

      <code style="font-weight: bold;">ant setup</code><br>

      <code style="font-weight: bold;">ant deploy</code><br>

This will setup, build and deploy the Java Olio web
app&nbsp; on the application
server, and then launch the application homepage in your default
browser at a url such as http://localhost:8080/webapp. <br>

    </li>

  </ol>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;">Uninstalling&nbsp;</h2>
<span style="font-family: Times New Roman,Times,serif;">
To uninstall the Olio Java web app from the
application
server, follow these steps: </span><br style="font-family: Times New Roman,Times,serif;">

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Start the Sun Java System Application Server and the JavaDB
database. To do so, open a command prompt&nbsp;and change
directory to <code>&lt;javaeesdk.home&gt;/bin</code>
and issue the following
commands:<br>

    <code>asadmin start-domain<br>

asadmin start-database</code><br>

  </li>

  <li>Change directory to&nbsp;<span style="font-style: italic;"></span><code>&lt;live.home&gt;
    </code>and enter the command:<br>

    <code>ant undeploy</code><br>

    <code>ant unsetup</code><br>

This will uninstall the BluePrints Live Web 2.0 web app application
from the application server and remove all the database tables from the
JavaDB database.</li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="installWebApp"></a><font size="4">Tuning Glassfish</font></h2>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Go to the administration interface, eg.
http://localhost:4848.</li>

  <li>
    <p>Ensure that you have the JVM option "-server" and the heap
size
has been adequately sized. &nbsp;For benchmarking purposes, we have
sized Xmx and Xms to 3G.</p>

  </li>

  <li>
    <p>Start Glassfish. Check that you can connect to it from
your
browser (http://<i>host</i>:8080), but don't try to access
any of the application pages yet !&nbsp;&nbsp;To do
so,&nbsp; <br>

    </p>

    <ul>

      <li>use $GLASSFISH_HOME/bin/asadmin start-domain domain1
(or
whatever your
domain name is if you are using the default domain1).&nbsp;</li>

      <li>To
stop Glassfish, use $GLASSFISH_HOME/bin/asadmin stop-domain domain1.</li>

    </ul>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><font size="4">Setting up the
filestore</font></h2>

<p style="font-family: Times New Roman,Times,serif;"><font size="3">The benchmark can be configured to
use either a local
filesystem or MogileFS for the object data. Our initial testing with
MogileFS found some severe performance issues, so for now we advice
using a normal filesystem (LocalFS). </font><font size="3">You
will need about 50GB of
space for the data, as the data does grow over runs</font>.
&nbsp;Using a single spindle does work but may create performance
bottlenecks. &nbsp;We recommend striping the filesystem across at
least
3 spindles to avoid such bottlenecks. &nbsp;A local file system
needs
to be setup on the same machine as the web application. &nbsp;A
network
file system can reside on a separate server but needs to be exported
and mounted on the system running the web application.</p>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p><font size="3">Create a directory (or mount a
filesystem) designated for storing the image and binary files. This
directory is referred to as &lt;filestore&gt;. Any valid name
for the OS should be fine. Ensure that everyone has read and write
access to
it:<br>

    </font><font size="3"># mkdir -p <span style="font-style: italic;">&lt;filestore&gt;</span><br>

# chmod a+rwx <span style="font-style: italic;">&lt;filestore&gt;</span></font></p>

  </li>

  <li>
    <p><font size="3">Now load the filestore.
&nbsp;You should have the $FABAN_HOME/benchmarks/JavaOlioDriver.jar
file on this system.</font><br>

    <font size="3"><font size="3">#&nbsp;<span style="font-style: italic;"></span></font></font>cd
$FABAN_HOME/benchmarks; mkdir olio<br>

    <br>

# cd olio; jar xvf ../OlioDriver.jar; chmod a+x bin/*<br>

# $FABAN_HOME/benchmarks/olio/bin/fileloader.sh
&lt;load_scale&gt; $FILESTORE<br>

    <br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This loads files for
use for up to load_scale number of active users.<font size="3"><font size="3">&nbsp;<br>

    <br>

    </font></font><font size="3"><font size="3"><font>Eg.
To load the filestore for 1000 users, you would do the following:</font></font></font><br>

# cd
/export/glassfish/domains/domain1/lib/webapp_lib/artifacts<br>

#
/opt/faban/benchmarks/JavaOlioDriver/bin/fileloader.sh 1000 .</p>


    <p><font size="3"><font size="3">This
loads files for use for up to <span style="font-style: italic;">load_scale</span>
number of concurrent users. You can preload for a rather high number
like 1000. If you ever need to run more than the previously loaded
concurrent users, you must reload the filestore. Otherwise, this is
a one time operation.</font></font></p>

  </li>

  <li><font size="3"><font size="3">If
you want to use NFS, you can create softlink from
&lt;GLASSFISH_HOME&gt;/domains/domain1/webapp/lib/artifacts to
&lt;filestore&gt;. &nbsp;For example, if you are using a
local
filestore, and it is the location /export/webapp/filestore, then you
would create a softlink as follows:<br>

    </font></font><font size="3"><font size="3">$
cd ${GLASSFISH_HOME}/domains/domain1/webapp/lib<br>

    <br>

$ ln -s /export/webapp/filestore artifacts<br>

    <br>

    </font></font><font size="3"><font size="3">If you are using a NFS filestore, then the ln
command in the above example would be:<br>

    </font></font><font size="3"><font size="3">$
ln -s /net/&lt;filestore_host&gt;/export/webapp/filestore
artifacts</font></font></li>

</ol>

<font style="font-family: Times New Roman,Times,serif;" size="3"><font size="3"></font></font>
<h2 style="font-family: Times New Roman,Times,serif;"><font><font size="4">Testing the
Application</font></font></h2>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>
    <p><font size="3">Check the home page (HomePage)
http://&lt;web_server&gt;:8080/webapp/index.jsp. If there are
no
error messages and all images get loaded, that's a great start !</font></p>

  </li>

  <li>
    <p><font size="3">Click on an event
(EventDetail). Make sure the whole page looks OK. </font> </p>

  </li>

  <li>
    <p><font size="3">Click on an attendee
(PersonDetail) to see a person's profile. </font> </p>

  </li>

  <li>
    <p><font size="3">Go back to the home page and
click on a tag in the tag cloud. Choose a big tag and check that we
have good results and images get loaded OK. </font> </p>

  </li>

  <li>
    <p><font size="3">Click on the sign up tab. Fill
in the form and create a user. Make sure you find some jpeg images to
upload. If not, take them from $FABAN_HOME/benchmarks/web20/resources. <br>

Submit the form. Make sure the form goes through. This completes the
AddPerson transaction. </font> </p>

  </li>

  <li>
    <p><font size="3">Login using your new login
name you just created. The top right of the screen should show that
you're logged on. </font> </p>

  </li>

  <li>
    <p><font size="3">Select an event, go back to
the EventDetail page but this time as a logged on user. <br>

Add yourself as an attendee. This is the EventDetail transaction with
attendee added (about 8-9% of all EventDetail views). </font> </p>

  </li>

  <li>
    <p><font size="3">Click on the add event tab and
add an event. Make sure to include an image and some literature. You
can also use the files from <br>

$FABAN_HOME/benchmarks/web20/resources. Fill in the form and submit.
This is the AddEvent transaction. <br>

    <br>

    </font> </p>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;"><a name="startRun"></a><font size="4">Starting
a benchmark run</font></h2>

<p style="margin-bottom: 0in; font-family: Times New Roman,Times,serif;">Now that we know that the
web
application is running and the faban harness is up, it is time to
kick off a benchmark run. </p>

<ol style="font-family: Times New Roman,Times,serif;">

  <li>Kill memcached. Memcached is always started by the driver
before the run to ensure a clean cache and will cause port conflicts if
it is already running.</li>

  <li>
    <p>Point your browser at http://<i>&lt;driver_machine&gt;</i>:9980</p>

  </li>

  <li>
    <p>Click on the <span style="font-style: normal;"><b>Schedule
Run</b></span> link.</p>

  </li>

  <li>
    <p>Under the JAVA tab, set the JAVA_HOME. You can accept the
default value for JVM options. <span style="font-weight: bold;">DO
NOT</span> click on the OK button yet !</p>

  </li>

  <li>
    <p>Select the Driver tab. </p>

    <p style="margin-bottom: 0in;">Enter a Description for
the run (say 'First test run' for this case). In general, the
Description field is very useful to get a quick idea of what a
particular run is testing. </p>

    <p style="margin-bottom: 0in;">Enter the name of your
driver(s) machine for Host (when using more than one machine, simply
separate them by a space). </p>

    <p style="margin-bottom: 0in;">Enter 10 for
'Concurrent Users' (we want to start small).</p>

    <p style="margin-bottom: 0in;">Enter 'vmstat 10' for
Tools. This indicates the measurement tools that will be run on the
driver machine. It's a good idea to keep an eye on the driver cpu
utilization.</p>

    <p style="margin-bottom: 0in;">Now enter 30, 30, 30
for the Ramp up, Steady State and Ramp down times. This is a very short
test run. For normal runs, you may need a ramp up of 200 seconds and a
steady state of at least 600 seconds during which measurements are made.</p>

    <p style="margin-bottom: 0in;">For current systems,
the time between client startup of 200 milliseconds is good enough.
Some web servers or slower systems may not be able to accept
connections very frequently. In that case we may want to increase this
value to 1000 milliseconds.</p>

  </li>

  <li>
    <p>Select the Web Server tab.<br>

    <br>

The number of Agents is best the same or multiple the number of driver
machines - we start with 1. The Host:Port Pairs field takes the host
port pairs where the web applications are running. The host and port is
separated by a colon. Each pair is separated by space. For the
Webserver type field, enter either "GlassFish" dependent on which web
server you're using, or leave the field blank if you're using servers
other than these two. Only the GlassFish servers are supported at this
time. Then provide the application server's bin, log, and config
directories. &nbsp;You can ignore the box for the directory
containing
the php.ini file in the respective fields. Next, choose the server type
to be Java, if it is not already that way. Then, in the tools box, type
the tools you want to run. Here are the tools we typically run : vmstat
10; mpstat 10; iostat -x 10</p>

    <p style="margin-bottom: 0in;">The number of Agents is
the same as the number of driver machines &ndash; we start with 1.</p>

    <p style="margin-bottom: 0in;">Enter the Host and Port
where the web application is running. </p>

    <p style="margin-bottom: 0in;">Here are the tools we
typically run : vmstat 10; mpstat 10; iostat -xnmp 10</p>

  </li>

  <li>
    <p style="margin-bottom: 0in;">Select the Data Servers
tab.</p>

    <p style="margin-bottom: 0in;">For the database
server, enter the Host name. Edit the hostname part along of the JDBC
Connection URL. This is used by the loader program to reload the
database before a run. Set the 'Loader for Concurrent Users' to 25
(this is the minimum number of users we can load for and is good for up
to 25 concurrent users). You can set the loader to run a larger number
so that you don't have to edit this field every time. It is not
absolutely necessary to reload the database and files every time, but
you should do so for all performance runs. In that case, set the reload
fields to true every time </p>

    <p style="margin-bottom: 0in;">Set the Data Storage
server. For local storage this is the same host as the application
server.&nbsp;</p>

    <p style="margin-bottom: 0in;">Set the memcached
server instances to the servers you've configured in web.xml of the web
application. The driver harness will start the
memcached server instances accordingly. Note that the memcached server
instances are given as host:port pairs, separated by space. If a port
is not given, the default memcached port of 11211 is assumed. &nbsp;<br>

    <span style="font-weight: bold;">*NOTE - the memcache
server information is not necessary in this release of Java Olio.</span></p>

  </li>

  <li>
    <p>That's it. Click OK and the run should be scheduled. You
can click on the View Results link on the left to monitor the run.</p>

  </li>

</ol>

<h2 style="font-family: Times New Roman,Times,serif;">Troubleshooting</h2>

<p style="font-family: Times New Roman,Times,serif;">If you have problems when running the application, try the
following:
</p>

<ul style="font-family: Times New Roman,Times,serif;">

  <li>Make sure the application server and the database are
running</li>

  <li>Make sure the build environment under the bp-project/
directory is correctly
setup <br>

  </li>

  <li>Make sure you have run "<span style="font-weight: bold;">ant
setup</span>"
to setup the application's resources</li>

  <li>Review the output produced by the <code style="font-weight: bold;">"ant run"</code>
command. Often an error here contains the clue for what went wrong</li>

  <li>Review the application server log files for any errors</li>

  <li>If the sample application is accessed through a URL other
than
"http://localhost:8080/" then a new map KEY will have to
be generated to access the Google map service (this is not our
restiction, it is Googles).&nbsp; The key is currently
free and can be generated from
http://www.google.com/apis/maps/.&nbsp;
The resultant key can be placed in the Map Viewer component's key"
attribute in the WEB-INF/web.xml deployment descriptor under
the param-name com.sun.j2ee.blueprints.ui.mapviewer.KEY.&nbsp; For
example:</li>

</ul>

<div style="margin-left: 40px; font-family: Times New Roman,Times,serif;">&lt;param-name&gt;com.sun.j2ee.blueprints.ui.mapviewer.KEY&lt;/param-name&gt;&nbsp;&nbsp;&nbsp;
&lt;param-value&gt;ABQIAAAAyQYKk4__l80DyIsqLPvvuxTRFLl8Tcq3arEgFHYFeOMvEMiJ8RQehhrYXPIDrf1muScWAd1MXrlVkQ&lt;/param-value&gt;</div>

<ul>

</ul>

<br>

<hr noshade="noshade" size="1">
<p class="copy"><br>

</p>

</body>
</html>
